{"version":3,"names":["_lodash","require","_common","exports","buildResponseTransformation","unwrap","objectWithNestedPath","path","value","set","buildRequestTransformation","requestMessageEntityIdentifierField","requestMessageEntityPath","requestMessageOptionsPath","transformation","merge"],"sources":["../../../../../src/lib/transformations/preset/update.ts"],"sourcesContent":["import { merge, set } from 'lodash';\n\nimport { unwrap as buildResponseTransformation } from '../common';\n\nconst objectWithNestedPath = (path, value) => set({}, path, value);\n\nconst buildRequestTransformation = ({\n  requestMessageEntityIdentifierField,\n  requestMessageEntityPath,\n  requestMessageOptionsPath,\n}) => {\n  const transformation = objectWithNestedPath(\n    `${requestMessageEntityPath}.${requestMessageEntityIdentifierField}`,\n    '$[0]',\n  );\n\n  if (requestMessageOptionsPath) {\n    if (requestMessageOptionsPath === requestMessageEntityPath) {\n      return merge(\n        transformation,\n        objectWithNestedPath(requestMessageOptionsPath, {\n          '*': ['$[1]', '$[2]'],\n        }),\n      );\n    }\n\n    set(transformation, requestMessageOptionsPath, '$[2]');\n  }\n\n  return merge(\n    {},\n    transformation,\n    objectWithNestedPath(requestMessageEntityPath, { '*': '$[1]' }),\n  );\n};\n\nexport { buildRequestTransformation, buildResponseTransformation };\n"],"mappings":";;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AAEA,IAAAC,OAAA,GAAAD,OAAA;AAAkEE,OAAA,CAAAC,2BAAA,GAAAF,OAAA,CAAAG,MAAA;AAElE,MAAMC,oBAAoB,GAAGA,CAACC,IAAI,EAAEC,KAAK,KAAK,IAAAC,WAAG,EAAC,CAAC,CAAC,EAAEF,IAAI,EAAEC,KAAK,CAAC;AAElE,MAAME,0BAA0B,GAAGA,CAAC;EAClCC,mCAAmC;EACnCC,wBAAwB;EACxBC;AACF,CAAC,KAAK;EACJ,MAAMC,cAAc,GAAGR,oBAAoB,CACxC,GAAEM,wBAAyB,IAAGD,mCAAoC,EAAC,EACpE,MACF,CAAC;EAED,IAAIE,yBAAyB,EAAE;IAC7B,IAAIA,yBAAyB,KAAKD,wBAAwB,EAAE;MAC1D,OAAO,IAAAG,aAAK,EACVD,cAAc,EACdR,oBAAoB,CAACO,yBAAyB,EAAE;QAC9C,GAAG,EAAE,CAAC,MAAM,EAAE,MAAM;MACtB,CAAC,CACH,CAAC;IACH;IAEA,IAAAJ,WAAG,EAACK,cAAc,EAAED,yBAAyB,EAAE,MAAM,CAAC;EACxD;EAEA,OAAO,IAAAE,aAAK,EACV,CAAC,CAAC,EACFD,cAAc,EACdR,oBAAoB,CAACM,wBAAwB,EAAE;IAAE,GAAG,EAAE;EAAO,CAAC,CAChE,CAAC;AACH,CAAC;AAACT,OAAA,CAAAO,0BAAA,GAAAA,0BAAA"}