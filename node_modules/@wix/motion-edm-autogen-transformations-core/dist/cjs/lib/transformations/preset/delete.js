"use strict";

exports.__esModule = true;
exports.buildResponseTransformation = exports.buildRequestTransformation = void 0;
var _motionEdmAutogenCommon = require("@wix/motion-edm-autogen-common");
var _lodash = require("lodash");
var _common = require("../common");
const RESPONSE_OBJECT_UNCHANGED = _common.transformations.RESPONSE_OBJECT_UNCHANGED;
const contains = (longerPath, shorterPath) => longerPath.startsWith(shorterPath) && (0, _motionEdmAutogenCommon.segmentCount)(longerPath) === (0, _motionEdmAutogenCommon.segmentCount)(shorterPath) + 1;
const buildRequestTransformation = ({
  requestMessageIdentifierPath,
  requestMessageOptionsPath
}) => {
  const transformed = (0, _lodash.set)({}, requestMessageIdentifierPath, '$[0]');
  if (requestMessageOptionsPath) {
    if (contains(requestMessageIdentifierPath, requestMessageOptionsPath)) {
      return (0, _lodash.merge)(transformed, {
        [requestMessageOptionsPath]: {
          '*': '$[1]'
        }
      });
    }
    return (0, _lodash.set)(transformed, requestMessageOptionsPath, '$[1]');
  }
  return transformed;
};
exports.buildRequestTransformation = buildRequestTransformation;
const buildResponseTransformation = () => RESPONSE_OBJECT_UNCHANGED;
exports.buildResponseTransformation = buildResponseTransformation;
//# sourceMappingURL=delete.js.map