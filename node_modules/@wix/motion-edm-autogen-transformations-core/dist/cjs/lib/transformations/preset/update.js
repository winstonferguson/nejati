"use strict";

exports.__esModule = true;
exports.buildRequestTransformation = void 0;
var _lodash = require("lodash");
var _common = require("../common");
exports.buildResponseTransformation = _common.unwrap;
const objectWithNestedPath = (path, value) => (0, _lodash.set)({}, path, value);
const buildRequestTransformation = ({
  requestMessageEntityIdentifierField,
  requestMessageEntityPath,
  requestMessageOptionsPath
}) => {
  const transformation = objectWithNestedPath(`${requestMessageEntityPath}.${requestMessageEntityIdentifierField}`, '$[0]');
  if (requestMessageOptionsPath) {
    if (requestMessageOptionsPath === requestMessageEntityPath) {
      return (0, _lodash.merge)(transformation, objectWithNestedPath(requestMessageOptionsPath, {
        '*': ['$[1]', '$[2]']
      }));
    }
    (0, _lodash.set)(transformation, requestMessageOptionsPath, '$[2]');
  }
  return (0, _lodash.merge)({}, transformation, objectWithNestedPath(requestMessageEntityPath, {
    '*': '$[1]'
  }));
};
exports.buildRequestTransformation = buildRequestTransformation;
//# sourceMappingURL=update.js.map