{"version":3,"names":["_lodash","require","extractArgumentFromString","str","seen","Set","matches","match","add","pop","extractArgumensFromObject","object","Object","keys","reduce","acc","key","value","isPlainObject","isArray","getArgumentCardinality","transformation","size","exports"],"sources":["../../../src/lib/getArgumentCardinality.ts"],"sourcesContent":["import { isArray, isPlainObject } from 'lodash';\n\nconst extractArgumentFromString = (str, seen = new Set()) => {\n  // We expect a single argument in a valid string-transformation at most, e.g. $[1].someField\n  const matches = str.match(/(\\$\\[\\d+\\])/);\n\n  if (matches) {\n    seen.add(matches.pop());\n  }\n\n  return seen;\n};\n\nconst extractArgumensFromObject = (object, seen = new Set()) =>\n  Object.keys(object).reduce((acc, key) => {\n    const value = object[key];\n\n    if (isPlainObject(value) || isArray(value)) {\n      extractArgumensFromObject(value, seen);\n    } else if (typeof value === 'string') {\n      extractArgumentFromString(value, seen);\n    }\n\n    return acc;\n  }, seen);\n\nconst getArgumentCardinality = (transformation) =>\n  typeof transformation === 'string'\n    ? extractArgumentFromString(transformation).size\n    : extractArgumensFromObject(transformation).size;\n\nexport { getArgumentCardinality };\n"],"mappings":";;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AAEA,MAAMC,yBAAyB,GAAGA,CAACC,GAAG,EAAEC,IAAI,GAAG,IAAIC,GAAG,CAAC,CAAC,KAAK;EAC3D;EACA,MAAMC,OAAO,GAAGH,GAAG,CAACI,KAAK,CAAC,aAAa,CAAC;EAExC,IAAID,OAAO,EAAE;IACXF,IAAI,CAACI,GAAG,CAACF,OAAO,CAACG,GAAG,CAAC,CAAC,CAAC;EACzB;EAEA,OAAOL,IAAI;AACb,CAAC;AAED,MAAMM,yBAAyB,GAAGA,CAACC,MAAM,EAAEP,IAAI,GAAG,IAAIC,GAAG,CAAC,CAAC,KACzDO,MAAM,CAACC,IAAI,CAACF,MAAM,CAAC,CAACG,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAK;EACvC,MAAMC,KAAK,GAAGN,MAAM,CAACK,GAAG,CAAC;EAEzB,IAAI,IAAAE,qBAAa,EAACD,KAAK,CAAC,IAAI,IAAAE,eAAO,EAACF,KAAK,CAAC,EAAE;IAC1CP,yBAAyB,CAACO,KAAK,EAAEb,IAAI,CAAC;EACxC,CAAC,MAAM,IAAI,OAAOa,KAAK,KAAK,QAAQ,EAAE;IACpCf,yBAAyB,CAACe,KAAK,EAAEb,IAAI,CAAC;EACxC;EAEA,OAAOW,GAAG;AACZ,CAAC,EAAEX,IAAI,CAAC;AAEV,MAAMgB,sBAAsB,GAAIC,cAAc,IAC5C,OAAOA,cAAc,KAAK,QAAQ,GAC9BnB,yBAAyB,CAACmB,cAAc,CAAC,CAACC,IAAI,GAC9CZ,yBAAyB,CAACW,cAAc,CAAC,CAACC,IAAI;AAACC,OAAA,CAAAH,sBAAA,GAAAA,sBAAA"}