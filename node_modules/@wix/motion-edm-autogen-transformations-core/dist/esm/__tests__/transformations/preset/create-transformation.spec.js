import { aString } from '@wix/motion-runtime-test-context';
import { times } from 'lodash';
import { preset } from '../../..';
var _a = preset.create, buildRequestTransformation = _a.buildRequestTransformation, buildResponseTransformation = _a.buildResponseTransformation;
describe('create-method transformations', function () {
    describe('buildRequestTransformation', function () {
        test('creates a transformation that maps the first argument into requestMessageEntityPath', function () {
            var _a;
            var requestMessageEntityPath = aString();
            var tranformationObject = buildRequestTransformation({
                requestMessageEntityPath: requestMessageEntityPath,
            });
            expect(tranformationObject).toStrictEqual((_a = {},
                _a[requestMessageEntityPath] = '$[0]',
                _a));
        });
        test('supports nested paths', function () {
            var _a, _b;
            // @ts-expect-error
            var entityPathSegments = times(2, aString);
            var requestMessageEntityPath = entityPathSegments.join('.');
            var tranformationObject = buildRequestTransformation({
                requestMessageEntityPath: requestMessageEntityPath,
            });
            expect(tranformationObject).toStrictEqual((_a = {},
                _a[entityPathSegments[0]] = (_b = {}, _b[entityPathSegments[1]] = '$[0]', _b),
                _a));
        });
    });
    describe('buildResponseTransformation', function () {
        test('unwraps the value of the provided property-path', function () {
            var responseMessageResultPath = aString();
            var tranformationString = buildResponseTransformation({
                responseMessageResultPath: responseMessageResultPath,
            });
            expect(tranformationString).toStrictEqual("$.".concat(responseMessageResultPath));
        });
    });
});
//# sourceMappingURL=create-transformation.spec.js.map