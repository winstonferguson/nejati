{"version":3,"names":["_index","require","exports","populateGlobalFeatureSupport","_imageServiceConstants","wixStatic","wixStaticWithMedia","HAS_MEDIA_PREFIX_RE","devicePixelRatio","window","getWixStaticURL","uri","test","getURL","options","baseHostURL","getScaleToFitImageURL","relativeUrl","sourceWidth","sourceHeight","targetWidth","targetHeight","data","getData","fittingTypes","SCALE_TO_FIT","id","width","height","name","htmlTag","IMG","alignment","alignTypes","CENTER","pixelAspectRatio","getScaleToFillImageURL","SCALE_TO_FILL","focalPoint","x","y","getCropImageURL","cropX","cropY","cropWidth","cropHeight","crop"],"sources":["../../../src/sdk/api.ts"],"sourcesContent":["import { getData, populateGlobalFeatureSupport } from '../api/uri/index';\nimport {\n  fittingTypes,\n  htmlTag,\n  alignTypes,\n} from '../helpers/imageServiceConstants';\nimport type { ImageTransformOptions } from '../types';\n\nconst wixStatic = 'https://static.wixstatic.com/';\nconst wixStaticWithMedia = 'https://static.wixstatic.com/media/';\nconst HAS_MEDIA_PREFIX_RE = /^media\\//i;\n\nconst devicePixelRatio =\n  typeof window !== 'undefined' ? window.devicePixelRatio : 1;\n\nconst getWixStaticURL = (uri: string) =>\n  HAS_MEDIA_PREFIX_RE.test(uri)\n    ? `${wixStatic}${uri}`\n    : `${wixStaticWithMedia}${uri}`;\n\nconst getURL = (uri: string, options?: ImageTransformOptions) => {\n  const baseHostURL = options && options.baseHostURL;\n  return baseHostURL ? `${baseHostURL}${uri}` : getWixStaticURL(uri);\n};\n\nfunction getScaleToFitImageURL(\n  relativeUrl: string,\n  sourceWidth: number,\n  sourceHeight: number,\n  targetWidth: number,\n  targetHeight: number,\n  options?: ImageTransformOptions,\n) {\n  const data = getData(\n    fittingTypes.SCALE_TO_FIT,\n    {\n      id: relativeUrl,\n      width: sourceWidth,\n      height: sourceHeight,\n      name: options && options.name,\n    },\n    {\n      width: targetWidth,\n      height: targetHeight,\n      htmlTag: htmlTag.IMG,\n      alignment: alignTypes.CENTER,\n      pixelAspectRatio: devicePixelRatio,\n    },\n    options,\n  );\n\n  return getURL(data.uri, options);\n}\n\nfunction getScaleToFillImageURL(\n  relativeUrl: string,\n  sourceWidth: number,\n  sourceHeight: number,\n  targetWidth: number,\n  targetHeight: number,\n  options?: ImageTransformOptions,\n) {\n  const data = getData(\n    fittingTypes.SCALE_TO_FILL,\n    {\n      id: relativeUrl,\n      width: sourceWidth,\n      height: sourceHeight,\n      name: options && options.name,\n      focalPoint: {\n        x: options && options.focalPoint && options.focalPoint.x,\n        y: options && options.focalPoint && options.focalPoint.y,\n      },\n    },\n    {\n      width: targetWidth,\n      height: targetHeight,\n      htmlTag: htmlTag.IMG,\n      alignment: alignTypes.CENTER,\n      pixelAspectRatio: devicePixelRatio,\n    },\n    options,\n  );\n\n  return getURL(data.uri, options);\n}\n\nfunction getCropImageURL(\n  relativeUrl: string,\n  sourceWidth: number,\n  sourceHeight: number,\n  cropX: number,\n  cropY: number,\n  cropWidth: number,\n  cropHeight: number,\n  targetWidth: number,\n  targetHeight: number,\n  options?: ImageTransformOptions,\n) {\n  const data = getData(\n    fittingTypes.SCALE_TO_FILL,\n    {\n      id: relativeUrl,\n      width: sourceWidth,\n      height: sourceHeight,\n      name: options && options.name,\n      crop: {\n        x: cropX,\n        y: cropY,\n        width: cropWidth,\n        height: cropHeight,\n      },\n    },\n    {\n      width: targetWidth,\n      height: targetHeight,\n      htmlTag: htmlTag.IMG,\n      alignment: alignTypes.CENTER,\n      pixelAspectRatio: devicePixelRatio,\n    },\n    options,\n  );\n\n  return getURL(data.uri, options);\n}\n\nexport {\n  populateGlobalFeatureSupport,\n  getScaleToFitImageURL,\n  getScaleToFillImageURL,\n  getCropImageURL,\n  wixStatic,\n  wixStaticWithMedia,\n};\n"],"mappings":"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"}