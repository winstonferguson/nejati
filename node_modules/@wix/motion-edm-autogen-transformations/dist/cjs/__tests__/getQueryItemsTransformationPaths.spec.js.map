{"version":3,"names":["_motionRuntimeTestContext","require","_lodash","_","describe","test","each","aString","transformation","expect","getQueryItemsTransformationPaths","toStrictEqual","key","jsonPath","items","_times","times","key1","key2","key3","expected","join"],"sources":["../../../src/__tests__/getQueryItemsTransformationPaths.spec.ts"],"sourcesContent":["import { aString } from '@wix/motion-runtime-test-context';\nimport { times } from 'lodash';\n\nimport { getQueryItemsTransformationPaths } from '..';\n\ndescribe('getQueryItemsTransformationPaths', () => {\n  test.each`\n    transformation                | description\n    ${{}}                         | ${'empty'}\n    ${{ [aString()]: aString() }} | ${'no item transformation'}\n    ${'$'}                        | ${'a string'}\n  `(\n    'returns an empty object when transformation is $description',\n    ({ transformation }) => {\n      expect(getQueryItemsTransformationPaths(transformation)).toStrictEqual(\n        {},\n      );\n    },\n  );\n\n  test('collects top-level simple transformation keys', () => {\n    const key = aString();\n    const jsonPath = '$.a.b.c';\n\n    const transformation = {\n      items: {\n        '@path': '$',\n        '@itemTransformation': {\n          [key]: jsonPath,\n        },\n      },\n    };\n\n    expect(getQueryItemsTransformationPaths(transformation)).toStrictEqual({\n      [key]: 'a.b.c',\n    });\n  });\n\n  test('collects nested simple transformation keys', () => {\n    const [key1, key2, key3] = times(3, () => aString());\n    const jsonPath = '$.a.a.a';\n\n    const expected = [key1, key2, key3].join('.');\n\n    const transformation = {\n      items: {\n        '@path': '$',\n        '@itemTransformation': {\n          [key1]: {\n            [key2]: {\n              [key3]: jsonPath,\n            },\n          },\n        },\n      },\n    };\n\n    expect(getQueryItemsTransformationPaths(transformation)).toStrictEqual({\n      [expected]: 'a.a.a',\n    });\n  });\n});\n"],"mappings":";;AAAA,IAAAA,yBAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AAEA,IAAAE,CAAA,GAAAF,OAAA;AAEAG,QAAQ,CAAC,kCAAkC,EAAE,MAAM;EACjDC,IAAI,CAACC,IAAK;AACZ;AACA,MAAM,CAAC,CAAE,8BAA6B,OAAQ;AAC9C,MAAM;IAAE,CAAC,IAAAC,iCAAO,EAAC,CAAC,GAAG,IAAAA,iCAAO,EAAC;EAAE,CAAE,MAAK,wBAAyB;AAC/D,MAAM,GAAI,6BAA4B,UAAW;AACjD,GAAG,CACC,6DAA6D,EAC7D,CAAC;IAAEC;EAAe,CAAC,KAAK;IACtBC,MAAM,CAAC,IAAAC,kCAAgC,EAACF,cAAc,CAAC,CAAC,CAACG,aAAa,CACpE,CAAC,CACH,CAAC;EACH,CACF,CAAC;EAEDN,IAAI,CAAC,+CAA+C,EAAE,MAAM;IAC1D,MAAMO,GAAG,GAAG,IAAAL,iCAAO,EAAC,CAAC;IACrB,MAAMM,QAAQ,GAAG,SAAS;IAE1B,MAAML,cAAc,GAAG;MACrBM,KAAK,EAAE;QACL,OAAO,EAAE,GAAG;QACZ,qBAAqB,EAAE;UACrB,CAACF,GAAG,GAAGC;QACT;MACF;IACF,CAAC;IAEDJ,MAAM,CAAC,IAAAC,kCAAgC,EAACF,cAAc,CAAC,CAAC,CAACG,aAAa,CAAC;MACrE,CAACC,GAAG,GAAG;IACT,CAAC,CAAC;EACJ,CAAC,CAAC;EAEFP,IAAI,CAAC,4CAA4C,EAAE,MAAM;IACvD,MAAAU,MAAA,GAA2B,IAAAC,aAAK,EAAC,CAAC,EAAE,MAAM,IAAAT,iCAAO,EAAC,CAAC,CAAC;MAA7CU,IAAI,GAAAF,MAAA;MAAEG,IAAI,GAAAH,MAAA;MAAEI,IAAI,GAAAJ,MAAA;IACvB,MAAMF,QAAQ,GAAG,SAAS;IAE1B,MAAMO,QAAQ,GAAG,CAACH,IAAI,EAAEC,IAAI,EAAEC,IAAI,CAAC,CAACE,IAAI,CAAC,GAAG,CAAC;IAE7C,MAAMb,cAAc,GAAG;MACrBM,KAAK,EAAE;QACL,OAAO,EAAE,GAAG;QACZ,qBAAqB,EAAE;UACrB,CAACG,IAAI,GAAG;YACN,CAACC,IAAI,GAAG;cACN,CAACC,IAAI,GAAGN;YACV;UACF;QACF;MACF;IACF,CAAC;IAEDJ,MAAM,CAAC,IAAAC,kCAAgC,EAACF,cAAc,CAAC,CAAC,CAACG,aAAa,CAAC;MACrE,CAACS,QAAQ,GAAG;IACd,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC,CAAC"}