{"version":3,"names":["_motionRuntimeTestContext","require","_lodash","_","describe","valueToKeep","aString","_times","times","propertyToRemove1","propertyToRemove2","propertyToKeep1","propertyToKeep2","test","result","omitUndefinedValues","undefined","expect","toStrictEqual","each","aNumber","aBoolean","value"],"sources":["../../../../src/__tests__/transformations/omitUndefinedValues.spec.ts"],"sourcesContent":["import { aBoolean, aNumber, aString } from '@wix/motion-runtime-test-context';\nimport { times } from 'lodash';\n\nimport { omitUndefinedValues } from '../..';\n\ndescribe('omitUndefinedValues', () => {\n  const valueToKeep = aString();\n  const [\n    propertyToRemove1,\n    propertyToRemove2,\n    propertyToKeep1,\n    propertyToKeep2,\n  ] = times(4, () => aString());\n\n  test('removes keys with undefined values', () => {\n    const result = omitUndefinedValues({\n      [propertyToRemove1]: undefined,\n      [propertyToKeep1]: valueToKeep,\n    });\n\n    expect(result).toStrictEqual({ [propertyToKeep1]: valueToKeep });\n  });\n\n  test('removes objects with all undefined keys', () => {\n    const result = omitUndefinedValues({\n      [propertyToRemove1]: {\n        [propertyToRemove1]: undefined,\n        [propertyToRemove2]: undefined,\n      },\n      [propertyToKeep1]: valueToKeep,\n    });\n\n    expect(result).toStrictEqual({ [propertyToKeep1]: valueToKeep });\n  });\n\n  test('removes nested objects recursively', () => {\n    expect(\n      omitUndefinedValues({\n        [propertyToKeep1]: {\n          [propertyToRemove1]: {\n            [propertyToRemove1]: { [propertyToRemove1]: undefined },\n            [propertyToRemove2]: undefined,\n          },\n          [propertyToKeep1]: valueToKeep,\n        },\n      }),\n    ).toStrictEqual({ [propertyToKeep1]: { [propertyToKeep1]: valueToKeep } });\n  });\n\n  test('does not remove empty object with no keys', () => {\n    expect(\n      omitUndefinedValues({\n        [propertyToKeep1]: {\n          [propertyToKeep1]: {\n            [propertyToRemove1]: { [propertyToRemove1]: undefined },\n            [propertyToKeep1]: {},\n          },\n          [propertyToKeep2]: valueToKeep,\n        },\n      }),\n    ).toStrictEqual({\n      [propertyToKeep1]: {\n        [propertyToKeep1]: {\n          [propertyToKeep1]: {},\n        },\n        [propertyToKeep2]: valueToKeep,\n      },\n    });\n  });\n\n  test.each`\n    value         | description\n    ${null}       | ${'null'}\n    ${aNumber()}  | ${'a number'}\n    ${aBoolean()} | ${'a boolean'}\n    ${[]}         | ${'an empty array'}\n  `('does not remove $description', ({ value }) => {\n    expect(\n      omitUndefinedValues({\n        [propertyToKeep1]: {\n          [propertyToKeep1]: {\n            [propertyToRemove1]: { [propertyToRemove1]: undefined },\n            [propertyToKeep1]: value,\n          },\n        },\n      }),\n    ).toStrictEqual({\n      [propertyToKeep1]: {\n        [propertyToKeep1]: {\n          [propertyToKeep1]: value,\n        },\n      },\n    });\n  });\n});\n"],"mappings":"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"}