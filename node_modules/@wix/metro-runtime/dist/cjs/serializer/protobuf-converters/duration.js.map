{"version":3,"names":["_domain","require","duration","types","ConverterType","TO_JSON","transform","seconds","nanos","nanosPortion","toString","padStart","FROM_JSON","val","_val$substring$split","substring","length","split","nanosForString","exports","res","undefined","precision","parseInt","Math","pow"],"sources":["../../../../src/serializer/protobuf-converters/duration.ts"],"sourcesContent":["import { ConverterSet, ConverterType } from '../domain';\nimport { GoogleProtoDuration } from './types';\n\nexport const duration: ConverterSet = {\n  types: ['google.protobuf.Duration'],\n\n  [ConverterType.TO_JSON]: {\n    transform: ({ seconds = '0', nanos = 0 }: GoogleProtoDuration) => {\n      let nanosPortion = '';\n\n      if (nanos !== 0) {\n        nanosPortion = `.${nanos.toString().padStart(9, '0')}`;\n      }\n\n      return `${seconds}${nanosPortion}s`;\n    },\n  },\n\n  [ConverterType.FROM_JSON]: {\n    transform: (val: string): GoogleProtoDuration => {\n      const [seconds, nanos] = val.substring(0, val.length - 1).split('.');\n\n      return {\n        seconds,\n        nanos: nanosForString(nanos),\n      };\n    },\n  },\n};\n\nfunction nanosForString(nanos: string) {\n  let res = 0;\n\n  if (nanos !== undefined) {\n    const precision = 3 - nanos.length / 3;\n    res = parseInt(nanos, 10) * Math.pow(1000, precision);\n  }\n\n  return res;\n}\n"],"mappings":";;;;AAAA,IAAAA,OAAA,GAAAC,OAAA;AAGO,MAAMC,QAAsB,GAAG;EACpCC,KAAK,EAAE,CAAC,0BAA0B,CAAC;EAEnC,CAACC,qBAAa,CAACC,OAAO,GAAG;IACvBC,SAAS,EAAEA,CAAC;MAAEC,OAAO,GAAG,GAAG;MAAEC,KAAK,GAAG;IAAuB,CAAC,KAAK;MAChE,IAAIC,YAAY,GAAG,EAAE;MAErB,IAAID,KAAK,KAAK,CAAC,EAAE;QACfC,YAAY,GAAI,IAAGD,KAAK,CAACE,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAE,EAAC;MACxD;MAEA,OAAQ,GAAEJ,OAAQ,GAAEE,YAAa,GAAE;IACrC;EACF,CAAC;EAED,CAACL,qBAAa,CAACQ,SAAS,GAAG;IACzBN,SAAS,EAAGO,GAAW,IAA0B;MAC/C,MAAAC,oBAAA,GAAyBD,GAAG,CAACE,SAAS,CAAC,CAAC,EAAEF,GAAG,CAACG,MAAM,GAAG,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC;QAA7DV,OAAO,GAAAO,oBAAA;QAAEN,KAAK,GAAAM,oBAAA;MAErB,OAAO;QACLP,OAAO;QACPC,KAAK,EAAEU,cAAc,CAACV,KAAK;MAC7B,CAAC;IACH;EACF;AACF,CAAC;AAACW,OAAA,CAAAjB,QAAA,GAAAA,QAAA;AAEF,SAASgB,cAAcA,CAACV,KAAa,EAAE;EACrC,IAAIY,GAAG,GAAG,CAAC;EAEX,IAAIZ,KAAK,KAAKa,SAAS,EAAE;IACvB,MAAMC,SAAS,GAAG,CAAC,GAAGd,KAAK,CAACQ,MAAM,GAAG,CAAC;IACtCI,GAAG,GAAGG,QAAQ,CAACf,KAAK,EAAE,EAAE,CAAC,GAAGgB,IAAI,CAACC,GAAG,CAAC,IAAI,EAAEH,SAAS,CAAC;EACvD;EAEA,OAAOF,GAAG;AACZ"}