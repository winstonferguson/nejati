{"version":3,"names":["flattenParams","data","path","params","Object","entries","forEach","key","value","isObject","Array","isArray","fieldPath","resolvePath","serializedObject","assign","toURLSearchParams","flatten","reduce","urlSearchParams","keyParams","param","undefined","append","URLSearchParams"],"sources":["../../src/flatten-params.ts"],"sourcesContent":["// Flatten a nested object to params object { field: { text: 'foo' } } => { field.text ='foo' }\nfunction flattenParams(data: object, path = '') {\n  const params: any = {};\n\n  Object.entries(data).forEach(([key, value]) => {\n    const isObject =\n      value !== null && typeof value === 'object' && !Array.isArray(value);\n    const fieldPath = resolvePath(path, key);\n\n    if (isObject) {\n      const serializedObject = flattenParams(value, fieldPath);\n      Object.assign(params, serializedObject);\n    } else {\n      params[fieldPath] = value;\n    }\n  });\n\n  return params;\n}\n\nfunction resolvePath(path: string, key: string) {\n  return `${path}${path ? '.' : ''}${key}`;\n}\n\nexport function toURLSearchParams(params: any) {\n  const flatten = flattenParams(params);\n\n  return Object.entries(flatten).reduce((urlSearchParams, [key, value]) => {\n    // inorder to make `foo: [1,2]` turn into `foo=1&foo=2` and not `foo[]=1&foo[]=2`\n    const keyParams = Array.isArray(value) ? value : [value];\n\n    keyParams.forEach((param: any) => {\n      if (param === undefined || param === null) {\n        return;\n      }\n\n      urlSearchParams.append(key, param);\n    });\n\n    return urlSearchParams;\n  }, new URLSearchParams());\n}\n"],"mappings":";;;;AAAA;AACA,SAASA,aAAaA,CAACC,IAAY,EAAEC,IAAI,GAAG,EAAE,EAAE;EAC9C,MAAMC,MAAW,GAAG,CAAC,CAAC;EAEtBC,MAAM,CAACC,OAAO,CAACJ,IAAI,CAAC,CAACK,OAAO,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAK;IAC7C,MAAMC,QAAQ,GACZD,KAAK,KAAK,IAAI,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAI,CAACE,KAAK,CAACC,OAAO,CAACH,KAAK,CAAC;IACtE,MAAMI,SAAS,GAAGC,WAAW,CAACX,IAAI,EAAEK,GAAG,CAAC;IAExC,IAAIE,QAAQ,EAAE;MACZ,MAAMK,gBAAgB,GAAGd,aAAa,CAACQ,KAAK,EAAEI,SAAS,CAAC;MACxDR,MAAM,CAACW,MAAM,CAACZ,MAAM,EAAEW,gBAAgB,CAAC;IACzC,CAAC,MAAM;MACLX,MAAM,CAACS,SAAS,CAAC,GAAGJ,KAAK;IAC3B;EACF,CAAC,CAAC;EAEF,OAAOL,MAAM;AACf;AAEA,SAASU,WAAWA,CAACX,IAAY,EAAEK,GAAW,EAAE;EAC9C,OAAQ,GAAEL,IAAK,GAAEA,IAAI,GAAG,GAAG,GAAG,EAAG,GAAEK,GAAI,EAAC;AAC1C;AAEO,SAASS,iBAAiBA,CAACb,MAAW,EAAE;EAC7C,MAAMc,OAAO,GAAGjB,aAAa,CAACG,MAAM,CAAC;EAErC,OAAOC,MAAM,CAACC,OAAO,CAACY,OAAO,CAAC,CAACC,MAAM,CAAC,CAACC,eAAe,EAAE,CAACZ,GAAG,EAAEC,KAAK,CAAC,KAAK;IACvE;IACA,MAAMY,SAAS,GAAGV,KAAK,CAACC,OAAO,CAACH,KAAK,CAAC,GAAGA,KAAK,GAAG,CAACA,KAAK,CAAC;IAExDY,SAAS,CAACd,OAAO,CAAEe,KAAU,IAAK;MAChC,IAAIA,KAAK,KAAKC,SAAS,IAAID,KAAK,KAAK,IAAI,EAAE;QACzC;MACF;MAEAF,eAAe,CAACI,MAAM,CAAChB,GAAG,EAAEc,KAAK,CAAC;IACpC,CAAC,CAAC;IAEF,OAAOF,eAAe;EACxB,CAAC,EAAE,IAAIK,eAAe,CAAC,CAAC,CAAC;AAC3B"}