"use strict";

exports.__esModule = true;
exports.toAmbassadorRequest = toAmbassadorRequest;
exports.toDbDriverEntity = toDbDriverEntity;
exports.toVeloEntity = toVeloEntity;
var _utils = require("./serializer/utils");
var _converters = require("./serializer/db-drivers-converters/converters");
var _serializer = require("./serializer/serializer");
var _domain = require("./serializer/domain");
var _transformationHandler = require("./transformation-handler");
exports.RootPath = _transformationHandler.RootPath;
var _converters2 = require("./serializer/velo-converters/converters");
var _queryTransformation = require("./query-transformation");
exports.toPlatformizedQuery = _queryTransformation.toPlatformizedQuery;
var _motionEdmAutogenTransformations = require("@wix/motion-edm-autogen-transformations");
const converters = (0, _utils.typeToConverterSet)([..._converters.dbDriversConverters, ..._converters2.veloConverters]);
function toAmbassadorRequest({
  rootSchema,
  depSchemas,
  fqdnTransformation
}, entity) {
  const asRequestStructure = (0, _motionEdmAutogenTransformations.fromCorvidEntity)((0, _transformationHandler.transformFqdn)(entity, fqdnTransformation));
  const request = (0, _serializer.schemaSerializer)(rootSchema, depSchemas, converters)(asRequestStructure, _domain.ConverterType.TO_JSON);
  return request;
}
function toDbDriverEntity({
  rootSchema,
  depSchemas,
  fqdnTransformation
}, entity) {
  const asDbDriverStructure = (0, _serializer.schemaSerializer)(rootSchema, depSchemas, converters)(entity, _domain.ConverterType.FROM_JSON);
  const dbDriverEntity = (0, _motionEdmAutogenTransformations.toCorvidEntity)((0, _transformationHandler.transformFqdn)(asDbDriverStructure, fqdnTransformation));
  return dbDriverEntity;
}

/**
 * @deprecated
 */
function toVeloEntity(opts, entity) {
  return toDbDriverEntity(opts, entity);
}
//# sourceMappingURL=db-drivers.js.map