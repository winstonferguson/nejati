{"version":3,"names":["_Iterator","require","OffsetBasedIterator","Iterator","constructor","items","fetchNextPage","fetchPrevPage","offset","originQuery","limit","totalCount","tooManyToCount","_defineProperty2","default","_totalCount","_offset","_tooManyToCount","currentPage","_limit","undefined","Math","floor","totalPages","ceil","hasNext","Boolean","hasPrev","exports"],"sources":["../../src/OffsetBasedIterator.ts"],"sourcesContent":["import { Iterator } from './Iterator';\n\nclass OffsetBasedIterator extends Iterator {\n  private _totalCount;\n  private _offset;\n  private _tooManyToCount;\n\n  constructor({\n    items,\n    fetchNextPage,\n    fetchPrevPage,\n    offset,\n    originQuery,\n    limit,\n    totalCount,\n    tooManyToCount,\n  }) {\n    super({ items, fetchNextPage, fetchPrevPage, originQuery, limit });\n    this._totalCount = totalCount;\n    this._offset = offset;\n    this._tooManyToCount = tooManyToCount;\n  }\n\n  get currentPage(): number | undefined {\n    return this._limit === 0\n      ? undefined\n      : Math.floor(this._offset / this._limit);\n  }\n\n  get totalPages(): number | undefined {\n    return this._tooManyToCount || this._limit === 0\n      ? undefined\n      : Math.ceil(this._totalCount / this._limit);\n  }\n\n  get totalCount(): number | undefined {\n    return this._tooManyToCount ? undefined : this._totalCount;\n  }\n\n  hasNext(): boolean {\n    return Boolean(\n      this._limit !== 0 &&\n        this.currentPage !== undefined && // currentPage 0 is the first page\n        this.totalPages !== undefined &&\n        this.currentPage < this.totalPages - 1,\n    );\n  }\n\n  hasPrev(): boolean {\n    return Boolean(\n      this._limit !== 0 && this.currentPage && this.currentPage > 0,\n    );\n  }\n}\n\nexport { OffsetBasedIterator };\n"],"mappings":";;;;;;AAAA,IAAAA,SAAA,GAAAC,OAAA;AAEA,MAAMC,mBAAmB,SAASC,kBAAQ,CAAC;EAKzCC,WAAWA,CAAC;IACVC,KAAK;IACLC,aAAa;IACbC,aAAa;IACbC,MAAM;IACNC,WAAW;IACXC,KAAK;IACLC,UAAU;IACVC;EACF,CAAC,EAAE;IACD,KAAK,CAAC;MAAEP,KAAK;MAAEC,aAAa;MAAEC,aAAa;MAAEE,WAAW;MAAEC;IAAM,CAAC,CAAC;IAAC,IAAAG,gBAAA,CAAAC,OAAA;IAAA,IAAAD,gBAAA,CAAAC,OAAA;IAAA,IAAAD,gBAAA,CAAAC,OAAA;IACnE,IAAI,CAACC,WAAW,GAAGJ,UAAU;IAC7B,IAAI,CAACK,OAAO,GAAGR,MAAM;IACrB,IAAI,CAACS,eAAe,GAAGL,cAAc;EACvC;EAEA,IAAIM,WAAWA,CAAA,EAAuB;IACpC,OAAO,IAAI,CAACC,MAAM,KAAK,CAAC,GACpBC,SAAS,GACTC,IAAI,CAACC,KAAK,CAAC,IAAI,CAACN,OAAO,GAAG,IAAI,CAACG,MAAM,CAAC;EAC5C;EAEA,IAAII,UAAUA,CAAA,EAAuB;IACnC,OAAO,IAAI,CAACN,eAAe,IAAI,IAAI,CAACE,MAAM,KAAK,CAAC,GAC5CC,SAAS,GACTC,IAAI,CAACG,IAAI,CAAC,IAAI,CAACT,WAAW,GAAG,IAAI,CAACI,MAAM,CAAC;EAC/C;EAEA,IAAIR,UAAUA,CAAA,EAAuB;IACnC,OAAO,IAAI,CAACM,eAAe,GAAGG,SAAS,GAAG,IAAI,CAACL,WAAW;EAC5D;EAEAU,OAAOA,CAAA,EAAY;IACjB,OAAOC,OAAO,CACZ,IAAI,CAACP,MAAM,KAAK,CAAC,IACf,IAAI,CAACD,WAAW,KAAKE,SAAS;IAAI;IAClC,IAAI,CAACG,UAAU,KAAKH,SAAS,IAC7B,IAAI,CAACF,WAAW,GAAG,IAAI,CAACK,UAAU,GAAG,CACzC,CAAC;EACH;EAEAI,OAAOA,CAAA,EAAY;IACjB,OAAOD,OAAO,CACZ,IAAI,CAACP,MAAM,KAAK,CAAC,IAAI,IAAI,CAACD,WAAW,IAAI,IAAI,CAACA,WAAW,GAAG,CAC9D,CAAC;EACH;AACF;AAACU,OAAA,CAAA1B,mBAAA,GAAAA,mBAAA"}